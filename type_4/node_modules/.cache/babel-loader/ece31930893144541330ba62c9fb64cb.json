{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ace_builds_1 = require(\"ace-builds\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar React = require(\"react\");\n\nvar isEqual = require(\"lodash.isequal\");\n\nvar editorOptions_1 = require(\"./editorOptions\");\n\nvar ace = (0, editorOptions_1.getAceInstance)();\n\nvar ReactAce =\n/** @class */\nfunction (_super) {\n  __extends(ReactAce, _super);\n\n  function ReactAce(props) {\n    var _this = _super.call(this, props) || this;\n\n    editorOptions_1.editorEvents.forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n    _this.debounce = editorOptions_1.debounce;\n    return _this;\n  }\n\n  ReactAce.prototype.isInShadow = function (node) {\n    var parent = node && node.parentNode;\n\n    while (parent) {\n      if (parent.toString() === \"[object ShadowRoot]\") {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  };\n\n  ReactAce.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        onBeforeLoad = _a.onBeforeLoad,\n        onValidate = _a.onValidate,\n        mode = _a.mode,\n        focus = _a.focus,\n        theme = _a.theme,\n        fontSize = _a.fontSize,\n        value = _a.value,\n        defaultValue = _a.defaultValue,\n        showGutter = _a.showGutter,\n        wrapEnabled = _a.wrapEnabled,\n        showPrintMargin = _a.showPrintMargin,\n        _b = _a.scrollMargin,\n        scrollMargin = _b === void 0 ? [0, 0, 0, 0] : _b,\n        keyboardHandler = _a.keyboardHandler,\n        onLoad = _a.onLoad,\n        commands = _a.commands,\n        annotations = _a.annotations,\n        markers = _a.markers,\n        placeholder = _a.placeholder;\n    this.editor = ace.edit(this.refEditor);\n\n    if (onBeforeLoad) {\n      onBeforeLoad(ace);\n    }\n\n    var editorProps = Object.keys(this.props.editorProps);\n\n    for (var i = 0; i < editorProps.length; i++) {\n      this.editor[editorProps[i]] = this.props.editorProps[editorProps[i]];\n    }\n\n    if (this.props.debounceChangePeriod) {\n      this.onChange = this.debounce(this.onChange, this.props.debounceChangePeriod);\n    }\n\n    this.editor.renderer.setScrollMargin(scrollMargin[0], scrollMargin[1], scrollMargin[2], scrollMargin[3]);\n\n    if (this.isInShadow(this.refEditor)) {\n      this.editor.renderer.attachToShadowRoot();\n    }\n\n    this.editor.getSession().setMode(typeof mode === \"string\" ? \"ace/mode/\" + mode : mode);\n    if (theme && theme !== \"\") this.editor.setTheme(\"ace/theme/\" + theme);\n    this.editor.setFontSize(typeof fontSize === \"number\" ? fontSize + \"px\" : fontSize);\n    this.editor.getSession().setValue(!defaultValue ? value || \"\" : defaultValue);\n\n    if (this.props.navigateToFileEnd) {\n      this.editor.navigateFileEnd();\n    }\n\n    this.editor.renderer.setShowGutter(showGutter);\n    this.editor.getSession().setUseWrapMode(wrapEnabled);\n    this.editor.setShowPrintMargin(showPrintMargin);\n    this.editor.on(\"focus\", this.onFocus);\n    this.editor.on(\"blur\", this.onBlur);\n    this.editor.on(\"copy\", this.onCopy);\n    this.editor.on(\"paste\", this.onPaste);\n    this.editor.on(\"change\", this.onChange);\n    this.editor.on(\"input\", this.onInput);\n\n    if (placeholder) {\n      this.updatePlaceholder();\n    }\n\n    this.editor.getSession().selection.on(\"changeSelection\", this.onSelectionChange);\n    this.editor.getSession().selection.on(\"changeCursor\", this.onCursorChange);\n\n    if (onValidate) {\n      // @ts-ignore types don't include\n      this.editor.getSession().on(\"changeAnnotation\", function () {\n        // tslint:disable-next-line:no-shadowed-variable\n        var annotations = _this.editor.getSession().getAnnotations();\n\n        _this.props.onValidate(annotations);\n      });\n    }\n\n    this.editor.session.on(\"changeScrollTop\", this.onScroll);\n    this.editor.getSession().setAnnotations(annotations || []);\n\n    if (markers && markers.length > 0) {\n      this.handleMarkers(markers);\n    } // get a list of possible options to avoid 'misspelled option errors'\n\n\n    var availableOptions = this.editor.$options;\n    editorOptions_1.editorOptions.forEach(function (option) {\n      if (availableOptions.hasOwnProperty(option)) {\n        // @ts-ignore\n        _this.editor.setOption(option, _this.props[option]);\n      } else if (_this.props[option]) {\n        console.warn(\"ReactAce: editor option \" + option + \" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?\");\n      }\n    });\n    this.handleOptions(this.props);\n\n    if (Array.isArray(commands)) {\n      commands.forEach(function (command) {\n        if (typeof command.exec === \"string\") {\n          _this.editor.commands.bindKey(command.bindKey, command.exec);\n        } else {\n          _this.editor.commands.addCommand(command);\n        }\n      });\n    }\n\n    if (keyboardHandler) {\n      this.editor.setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    if (className) {\n      this.refEditor.className += \" \" + className;\n    }\n\n    if (onLoad) {\n      onLoad(this.editor);\n    }\n\n    this.editor.resize();\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  ReactAce.prototype.componentDidUpdate = function (prevProps) {\n    var oldProps = prevProps;\n    var nextProps = this.props;\n\n    for (var i = 0; i < editorOptions_1.editorOptions.length; i++) {\n      var option = editorOptions_1.editorOptions[i];\n\n      if (nextProps[option] !== oldProps[option]) {\n        // @ts-ignore\n        this.editor.setOption(option, nextProps[option]);\n      }\n    }\n\n    if (nextProps.className !== oldProps.className) {\n      var appliedClasses = this.refEditor.className;\n      var appliedClassesArray_1 = appliedClasses.trim().split(\" \");\n      var oldClassesArray = oldProps.className.trim().split(\" \");\n      oldClassesArray.forEach(function (oldClass) {\n        var index = appliedClassesArray_1.indexOf(oldClass);\n        appliedClassesArray_1.splice(index, 1);\n      });\n      this.refEditor.className = \" \" + nextProps.className + \" \" + appliedClassesArray_1.join(\" \");\n    } // First process editor value, as it may create a new session (see issue #300)\n\n\n    if (this.editor && nextProps.value != null && this.editor.getValue() !== nextProps.value) {\n      // editor.setValue is a synchronous function call, change event is emitted before setValue return.\n      this.silent = true;\n      var pos = this.editor.session.selection.toJSON();\n      this.editor.setValue(nextProps.value, nextProps.cursorStart);\n      this.editor.session.selection.fromJSON(pos);\n      this.silent = false;\n    }\n\n    if (nextProps.placeholder !== oldProps.placeholder) {\n      this.updatePlaceholder();\n    }\n\n    if (nextProps.mode !== oldProps.mode) {\n      this.editor.getSession().setMode(typeof nextProps.mode === \"string\" ? \"ace/mode/\" + nextProps.mode : nextProps.mode);\n    }\n\n    if (nextProps.theme !== oldProps.theme) {\n      this.editor.setTheme(\"ace/theme/\" + nextProps.theme);\n    }\n\n    if (nextProps.keyboardHandler !== oldProps.keyboardHandler) {\n      if (nextProps.keyboardHandler) {\n        this.editor.setKeyboardHandler(\"ace/keyboard/\" + nextProps.keyboardHandler);\n      } else {\n        this.editor.setKeyboardHandler(null);\n      }\n    }\n\n    if (nextProps.fontSize !== oldProps.fontSize) {\n      this.editor.setFontSize(typeof nextProps.fontSize === \"number\" ? nextProps.fontSize + \"px\" : nextProps.fontSize);\n    }\n\n    if (nextProps.wrapEnabled !== oldProps.wrapEnabled) {\n      this.editor.getSession().setUseWrapMode(nextProps.wrapEnabled);\n    }\n\n    if (nextProps.showPrintMargin !== oldProps.showPrintMargin) {\n      this.editor.setShowPrintMargin(nextProps.showPrintMargin);\n    }\n\n    if (nextProps.showGutter !== oldProps.showGutter) {\n      this.editor.renderer.setShowGutter(nextProps.showGutter);\n    }\n\n    if (!isEqual(nextProps.setOptions, oldProps.setOptions)) {\n      this.handleOptions(nextProps);\n    }\n\n    if (!isEqual(nextProps.annotations, oldProps.annotations)) {\n      this.editor.getSession().setAnnotations(nextProps.annotations || []);\n    }\n\n    if (!isEqual(nextProps.markers, oldProps.markers) && Array.isArray(nextProps.markers)) {\n      this.handleMarkers(nextProps.markers);\n    } // this doesn't look like it works at all....\n\n\n    if (!isEqual(nextProps.scrollMargin, oldProps.scrollMargin)) {\n      this.handleScrollMargins(nextProps.scrollMargin);\n    }\n\n    if (prevProps.height !== this.props.height || prevProps.width !== this.props.width) {\n      this.editor.resize();\n    }\n\n    if (this.props.focus && !prevProps.focus) {\n      this.editor.focus();\n    }\n  };\n\n  ReactAce.prototype.handleScrollMargins = function (margins) {\n    if (margins === void 0) {\n      margins = [0, 0, 0, 0];\n    }\n\n    this.editor.renderer.setScrollMargin(margins[0], margins[1], margins[2], margins[3]);\n  };\n\n  ReactAce.prototype.componentWillUnmount = function () {\n    this.editor.destroy();\n    this.editor = null;\n  };\n\n  ReactAce.prototype.onChange = function (event) {\n    if (this.props.onChange && !this.silent) {\n      var value = this.editor.getValue();\n      this.props.onChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onSelectionChange = function (event) {\n    if (this.props.onSelectionChange) {\n      var value = this.editor.getSelection();\n      this.props.onSelectionChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onCursorChange = function (event) {\n    if (this.props.onCursorChange) {\n      var value = this.editor.getSelection();\n      this.props.onCursorChange(value, event);\n    }\n  };\n\n  ReactAce.prototype.onInput = function (event) {\n    if (this.props.onInput) {\n      this.props.onInput(event);\n    }\n\n    if (this.props.placeholder) {\n      this.updatePlaceholder();\n    }\n  };\n\n  ReactAce.prototype.onFocus = function (event) {\n    if (this.props.onFocus) {\n      this.props.onFocus(event, this.editor);\n    }\n  };\n\n  ReactAce.prototype.onBlur = function (event) {\n    if (this.props.onBlur) {\n      this.props.onBlur(event, this.editor);\n    }\n  };\n\n  ReactAce.prototype.onCopy = function (_a) {\n    var text = _a.text;\n\n    if (this.props.onCopy) {\n      this.props.onCopy(text);\n    }\n  };\n\n  ReactAce.prototype.onPaste = function (_a) {\n    var text = _a.text;\n\n    if (this.props.onPaste) {\n      this.props.onPaste(text);\n    }\n  };\n\n  ReactAce.prototype.onScroll = function () {\n    if (this.props.onScroll) {\n      this.props.onScroll(this.editor);\n    }\n  };\n\n  ReactAce.prototype.handleOptions = function (props) {\n    var setOptions = Object.keys(props.setOptions);\n\n    for (var y = 0; y < setOptions.length; y++) {\n      // @ts-ignore\n      this.editor.setOption(setOptions[y], props.setOptions[setOptions[y]]);\n    }\n  };\n\n  ReactAce.prototype.handleMarkers = function (markers) {\n    var _this = this; // remove foreground markers\n\n\n    var currentMarkers = this.editor.getSession().getMarkers(true);\n\n    for (var i in currentMarkers) {\n      if (currentMarkers.hasOwnProperty(i)) {\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\n      }\n    } // remove background markers except active line marker and selected word marker\n\n\n    currentMarkers = this.editor.getSession().getMarkers(false);\n\n    for (var i in currentMarkers) {\n      if (currentMarkers.hasOwnProperty(i) && currentMarkers[i].clazz !== \"ace_active-line\" && currentMarkers[i].clazz !== \"ace_selected-word\") {\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\n      }\n    } // add new markers\n\n\n    markers.forEach(function (_a) {\n      var startRow = _a.startRow,\n          startCol = _a.startCol,\n          endRow = _a.endRow,\n          endCol = _a.endCol,\n          className = _a.className,\n          type = _a.type,\n          _b = _a.inFront,\n          inFront = _b === void 0 ? false : _b;\n      var range = new ace_builds_1.Range(startRow, startCol, endRow, endCol);\n\n      _this.editor.getSession().addMarker(range, className, type, inFront);\n    });\n  };\n\n  ReactAce.prototype.updatePlaceholder = function () {\n    // Adapted from https://stackoverflow.com/questions/26695708/how-can-i-add-placeholder-text-when-the-editor-is-empty\n    var editor = this.editor;\n    var placeholder = this.props.placeholder;\n    var showPlaceholder = !editor.session.getValue().length;\n    var node = editor.renderer.placeholderNode;\n\n    if (!showPlaceholder && node) {\n      editor.renderer.scroller.removeChild(editor.renderer.placeholderNode);\n      editor.renderer.placeholderNode = null;\n    } else if (showPlaceholder && !node) {\n      node = editor.renderer.placeholderNode = document.createElement(\"div\");\n      node.textContent = placeholder || \"\";\n      node.className = \"ace_comment ace_placeholder\";\n      node.style.padding = \"0 9px\";\n      node.style.position = \"absolute\";\n      node.style.zIndex = \"3\";\n      editor.renderer.scroller.appendChild(node);\n    } else if (showPlaceholder && node) {\n      node.textContent = placeholder;\n    }\n  };\n\n  ReactAce.prototype.updateRef = function (item) {\n    this.refEditor = item;\n  };\n\n  ReactAce.prototype.render = function () {\n    var _a = this.props,\n        name = _a.name,\n        width = _a.width,\n        height = _a.height,\n        style = _a.style;\n\n    var divStyle = __assign({\n      width: width,\n      height: height\n    }, style);\n\n    return React.createElement(\"div\", {\n      ref: this.updateRef,\n      id: name,\n      style: divStyle\n    });\n  };\n\n  ReactAce.propTypes = {\n    mode: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    focus: PropTypes.bool,\n    theme: PropTypes.string,\n    name: PropTypes.string,\n    className: PropTypes.string,\n    height: PropTypes.string,\n    width: PropTypes.string,\n    fontSize: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    showGutter: PropTypes.bool,\n    onChange: PropTypes.func,\n    onCopy: PropTypes.func,\n    onPaste: PropTypes.func,\n    onFocus: PropTypes.func,\n    onInput: PropTypes.func,\n    onBlur: PropTypes.func,\n    onScroll: PropTypes.func,\n    value: PropTypes.string,\n    defaultValue: PropTypes.string,\n    onLoad: PropTypes.func,\n    onSelectionChange: PropTypes.func,\n    onCursorChange: PropTypes.func,\n    onBeforeLoad: PropTypes.func,\n    onValidate: PropTypes.func,\n    minLines: PropTypes.number,\n    maxLines: PropTypes.number,\n    readOnly: PropTypes.bool,\n    highlightActiveLine: PropTypes.bool,\n    tabSize: PropTypes.number,\n    showPrintMargin: PropTypes.bool,\n    cursorStart: PropTypes.number,\n    debounceChangePeriod: PropTypes.number,\n    editorProps: PropTypes.object,\n    setOptions: PropTypes.object,\n    style: PropTypes.object,\n    scrollMargin: PropTypes.array,\n    annotations: PropTypes.array,\n    markers: PropTypes.array,\n    keyboardHandler: PropTypes.string,\n    wrapEnabled: PropTypes.bool,\n    enableSnippets: PropTypes.bool,\n    enableBasicAutocompletion: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    enableLiveAutocompletion: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    navigateToFileEnd: PropTypes.bool,\n    commands: PropTypes.array,\n    placeholder: PropTypes.string\n  };\n  ReactAce.defaultProps = {\n    name: \"ace-editor\",\n    focus: false,\n    mode: \"\",\n    theme: \"\",\n    height: \"500px\",\n    width: \"500px\",\n    fontSize: 12,\n    enableSnippets: false,\n    showGutter: true,\n    onChange: null,\n    onPaste: null,\n    onLoad: null,\n    onScroll: null,\n    minLines: null,\n    maxLines: null,\n    readOnly: false,\n    highlightActiveLine: true,\n    showPrintMargin: true,\n    tabSize: 4,\n    cursorStart: 1,\n    editorProps: {},\n    style: {},\n    scrollMargin: [0, 0, 0, 0],\n    setOptions: {},\n    wrapEnabled: false,\n    enableBasicAutocompletion: false,\n    enableLiveAutocompletion: false,\n    placeholder: null,\n    navigateToFileEnd: true\n  };\n  return ReactAce;\n}(React.Component);\n\nexports.default = ReactAce;","map":{"version":3,"mappings":"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","names":["isEqual","require","ace","__extends","props","_super","editorOptions_1","forEach","_this","method","bind","debounce","ReactAce","node","parent","parentNode","toString","className","onBeforeLoad","onValidate","mode","focus","theme","fontSize","value","defaultValue","showGutter","wrapEnabled","showPrintMargin","_b","scrollMargin","keyboardHandler","onLoad","commands","annotations","markers","placeholder","editor","edit","refEditor","editorProps","Object","keys","i","length","debounceChangePeriod","onChange","renderer","setScrollMargin","isInShadow","attachToShadowRoot","getSession","setMode","setTheme","setFontSize","setValue","navigateToFileEnd","navigateFileEnd","setShowGutter","setUseWrapMode","setShowPrintMargin","on","onFocus","onBlur","onCopy","onPaste","onInput","updatePlaceholder","selection","onSelectionChange","onCursorChange","getAnnotations","session","onScroll","setAnnotations","handleMarkers","availableOptions","$options","hasOwnProperty","option","setOption","console","warn","handleOptions","Array","isArray","command","exec","bindKey","addCommand","setKeyboardHandler","resize","prevProps","oldProps","nextProps","appliedClasses","appliedClassesArray_1","trim","split","oldClassesArray","index","indexOf","oldClass","splice","join","getValue","silent","pos","toJSON","cursorStart","fromJSON","setOptions","handleScrollMargins","height","width","margins","destroy","event","getSelection","_a","text","y","currentMarkers","getMarkers","removeMarker","id","clazz","startRow","startCol","endRow","endCol","type","inFront","range","ace_builds_1","addMarker","showPlaceholder","placeholderNode","scroller","removeChild","document","createElement","textContent","style","padding","position","zIndex","appendChild","item","name","divStyle","React","ref","updateRef","PropTypes","oneOfType","string","object","bool","number","func","minLines","maxLines","readOnly","highlightActiveLine","tabSize","array","enableSnippets","enableBasicAutocompletion","enableLiveAutocompletion","Component"],"sources":["C:\\Users\\ruthv\\Documents\\GitHub\\Type-4-Clone-Detection-Prototype\\type_4\\node_modules\\react-ace\\src\\ace.tsx"],"sourcesContent":["import { Ace, Range } from \"ace-builds\";\r\nimport * as AceBuilds from \"ace-builds\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport * as React from \"react\";\r\nconst isEqual = require(\"lodash.isequal\");\r\nimport {\r\n  debounce,\r\n  editorEvents,\r\n  editorOptions,\r\n  getAceInstance\r\n} from \"./editorOptions\";\r\nconst ace = getAceInstance();\r\n\r\nimport {\r\n  IAceEditor,\r\n  IAceOptions,\r\n  ICommand,\r\n  IEditorProps,\r\n  IMarker\r\n} from \"./types\";\r\n/**\r\n * See https://github.com/ajaxorg/ace/wiki/Configuring-Ace\r\n */\r\n\r\nexport interface IAceEditorProps {\r\n  name?: string;\r\n  style?: React.CSSProperties;\r\n  /** For available modes see https://github.com/thlorenz/brace/tree/master/mode */\r\n  mode?: string | object;\r\n  /** For available themes see https://github.com/thlorenz/brace/tree/master/theme */\r\n  theme?: string;\r\n  height?: string;\r\n  width?: string;\r\n  className?: string;\r\n  fontSize?: number | string;\r\n  showGutter?: boolean;\r\n  showPrintMargin?: boolean;\r\n  highlightActiveLine?: boolean;\r\n  focus?: boolean;\r\n  cursorStart?: number;\r\n  wrapEnabled?: boolean;\r\n  readOnly?: boolean;\r\n  minLines?: number;\r\n  maxLines?: number;\r\n  navigateToFileEnd?: boolean;\r\n  debounceChangePeriod?: number;\r\n  enableBasicAutocompletion?: boolean | string[];\r\n  enableLiveAutocompletion?: boolean | string[];\r\n  tabSize?: number;\r\n  value?: string;\r\n  placeholder?: string;\r\n  defaultValue?: string;\r\n  scrollMargin?: number[];\r\n  enableSnippets?: boolean;\r\n  onSelectionChange?: (value: any, event?: any) => void;\r\n  onCursorChange?: (value: any, event?: any) => void;\r\n  onInput?: (event?: any) => void;\r\n  onLoad?: (editor: Ace.Editor) => void;\r\n  onValidate?: (annotations: Ace.Annotation[]) => void;\r\n  onBeforeLoad?: (ace: typeof AceBuilds) => void;\r\n  onChange?: (value: string, event?: any) => void;\r\n  onSelection?: (selectedText: string, event?: any) => void;\r\n  onCopy?: (value: string) => void;\r\n  onPaste?: (value: string) => void;\r\n  onFocus?: (event: any, editor?: Ace.Editor) => void;\r\n  onBlur?: (event: any, editor?: Ace.Editor) => void;\r\n  onScroll?: (editor: IEditorProps) => void;\r\n  editorProps?: IEditorProps;\r\n  setOptions?: IAceOptions;\r\n  keyboardHandler?: string;\r\n  commands?: ICommand[];\r\n  annotations?: Ace.Annotation[];\r\n  markers?: IMarker[];\r\n}\r\n\r\nexport default class ReactAce extends React.Component<IAceEditorProps> {\r\n  public static propTypes: PropTypes.ValidationMap<IAceEditorProps> = {\r\n    mode: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n    focus: PropTypes.bool,\r\n    theme: PropTypes.string,\r\n    name: PropTypes.string,\r\n    className: PropTypes.string,\r\n    height: PropTypes.string,\r\n    width: PropTypes.string,\r\n    fontSize: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    showGutter: PropTypes.bool,\r\n    onChange: PropTypes.func,\r\n    onCopy: PropTypes.func,\r\n    onPaste: PropTypes.func,\r\n    onFocus: PropTypes.func,\r\n    onInput: PropTypes.func,\r\n    onBlur: PropTypes.func,\r\n    onScroll: PropTypes.func,\r\n    value: PropTypes.string,\r\n    defaultValue: PropTypes.string,\r\n    onLoad: PropTypes.func,\r\n    onSelectionChange: PropTypes.func,\r\n    onCursorChange: PropTypes.func,\r\n    onBeforeLoad: PropTypes.func,\r\n    onValidate: PropTypes.func,\r\n    minLines: PropTypes.number,\r\n    maxLines: PropTypes.number,\r\n    readOnly: PropTypes.bool,\r\n    highlightActiveLine: PropTypes.bool,\r\n    tabSize: PropTypes.number,\r\n    showPrintMargin: PropTypes.bool,\r\n    cursorStart: PropTypes.number,\r\n    debounceChangePeriod: PropTypes.number,\r\n    editorProps: PropTypes.object,\r\n    setOptions: PropTypes.object,\r\n    style: PropTypes.object,\r\n    scrollMargin: PropTypes.array,\r\n    annotations: PropTypes.array,\r\n    markers: PropTypes.array,\r\n    keyboardHandler: PropTypes.string,\r\n    wrapEnabled: PropTypes.bool,\r\n    enableSnippets: PropTypes.bool,\r\n    enableBasicAutocompletion: PropTypes.oneOfType([\r\n      PropTypes.bool,\r\n      PropTypes.array\r\n    ]),\r\n    enableLiveAutocompletion: PropTypes.oneOfType([\r\n      PropTypes.bool,\r\n      PropTypes.array\r\n    ]),\r\n    navigateToFileEnd: PropTypes.bool,\r\n    commands: PropTypes.array,\r\n    placeholder: PropTypes.string\r\n  };\r\n  public static defaultProps: Partial<IAceEditorProps> = {\r\n    name: \"ace-editor\",\r\n    focus: false,\r\n    mode: \"\",\r\n    theme: \"\",\r\n    height: \"500px\",\r\n    width: \"500px\",\r\n    fontSize: 12,\r\n    enableSnippets: false,\r\n    showGutter: true,\r\n    onChange: null,\r\n    onPaste: null,\r\n    onLoad: null,\r\n    onScroll: null,\r\n    minLines: null,\r\n    maxLines: null,\r\n    readOnly: false,\r\n    highlightActiveLine: true,\r\n    showPrintMargin: true,\r\n    tabSize: 4,\r\n    cursorStart: 1,\r\n    editorProps: {},\r\n    style: {},\r\n    scrollMargin: [0, 0, 0, 0],\r\n    setOptions: {},\r\n    wrapEnabled: false,\r\n    enableBasicAutocompletion: false,\r\n    enableLiveAutocompletion: false,\r\n    placeholder: null,\r\n    navigateToFileEnd: true\r\n  };\r\n  public editor: IAceEditor;\r\n  public refEditor: HTMLElement;\r\n  public debounce: (fn: any, delay: number) => (...args: any) => void;\r\n  // [index: string]: any;\r\n  public silent: boolean;\r\n  constructor(props: IAceEditorProps) {\r\n    super(props);\r\n    editorEvents.forEach(method => {\r\n      this[method] = this[method].bind(this);\r\n    });\r\n    this.debounce = debounce;\r\n  }\r\n  public isInShadow(node: HTMLElement): boolean {\r\n    let parent = node && node.parentNode;\r\n    while (parent) {\r\n      if (parent.toString() === \"[object ShadowRoot]\") {\r\n        return true;\r\n      }\r\n      parent = parent.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n  public componentDidMount() {\r\n    const {\r\n      className,\r\n      onBeforeLoad,\r\n      onValidate,\r\n      mode,\r\n      focus,\r\n      theme,\r\n      fontSize,\r\n      value,\r\n      defaultValue,\r\n      showGutter,\r\n      wrapEnabled,\r\n      showPrintMargin,\r\n      scrollMargin = [0, 0, 0, 0],\r\n      keyboardHandler,\r\n      onLoad,\r\n      commands,\r\n      annotations,\r\n      markers,\r\n      placeholder\r\n    } = this.props;\r\n\r\n    this.editor = ace.edit(this.refEditor);\r\n\r\n    if (onBeforeLoad) {\r\n      onBeforeLoad(ace);\r\n    }\r\n\r\n    const editorProps = Object.keys(this.props.editorProps);\r\n    for (let i = 0; i < editorProps.length; i++) {\r\n      this.editor[editorProps[i]] = this.props.editorProps[editorProps[i]];\r\n    }\r\n    if (this.props.debounceChangePeriod) {\r\n      this.onChange = this.debounce(\r\n        this.onChange,\r\n        this.props.debounceChangePeriod\r\n      );\r\n    }\r\n    this.editor.renderer.setScrollMargin(\r\n      scrollMargin[0],\r\n      scrollMargin[1],\r\n      scrollMargin[2],\r\n      scrollMargin[3]\r\n    );\r\n    if (this.isInShadow(this.refEditor)) {\r\n      this.editor.renderer.attachToShadowRoot();\r\n    }\r\n    this.editor\r\n      .getSession()\r\n      .setMode(\r\n        typeof mode === \"string\" ? `ace/mode/${mode}` : (mode as Ace.SyntaxMode)\r\n      );\r\n    if(theme && theme !== \"\")\r\n      this.editor.setTheme(`ace/theme/${theme}`);\r\n    this.editor.setFontSize(\r\n      typeof fontSize === \"number\" ? `${fontSize}px` : fontSize\r\n    );\r\n    this.editor\r\n      .getSession()\r\n      .setValue(!defaultValue ? value || \"\" : defaultValue);\r\n\r\n    if (this.props.navigateToFileEnd) {\r\n      this.editor.navigateFileEnd();\r\n    }\r\n    this.editor.renderer.setShowGutter(showGutter);\r\n    this.editor.getSession().setUseWrapMode(wrapEnabled);\r\n    this.editor.setShowPrintMargin(showPrintMargin);\r\n    this.editor.on(\"focus\", this.onFocus);\r\n    this.editor.on(\"blur\", this.onBlur);\r\n    this.editor.on(\"copy\", this.onCopy);\r\n    this.editor.on(\"paste\", this.onPaste);\r\n    this.editor.on(\"change\", this.onChange);\r\n    this.editor.on(\"input\", this.onInput);\r\n    if (placeholder) {\r\n      this.updatePlaceholder();\r\n    }\r\n    this.editor\r\n      .getSession()\r\n      .selection.on(\"changeSelection\", this.onSelectionChange);\r\n    this.editor.getSession().selection.on(\"changeCursor\", this.onCursorChange);\r\n    if (onValidate) {\r\n      // @ts-ignore types don't include\r\n      this.editor.getSession().on(\"changeAnnotation\", () => {\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        const annotations = this.editor.getSession().getAnnotations();\r\n        this.props.onValidate(annotations);\r\n      });\r\n    }\r\n    this.editor.session.on(\"changeScrollTop\", this.onScroll);\r\n    this.editor.getSession().setAnnotations(annotations || []);\r\n    if (markers && markers.length > 0) {\r\n      this.handleMarkers(markers);\r\n    }\r\n\r\n    // get a list of possible options to avoid 'misspelled option errors'\r\n    const availableOptions = this.editor.$options;\r\n    editorOptions.forEach(option => {\r\n      if (availableOptions.hasOwnProperty(option)) {\r\n        // @ts-ignore\r\n        this.editor.setOption(option, this.props[option]);\r\n      } else if (this.props[option]) {\r\n        console.warn(\r\n          `ReactAce: editor option ${option} was activated but not found. Did you need to import a related tool or did you possibly mispell the option?`\r\n        );\r\n      }\r\n    });\r\n\r\n    this.handleOptions(this.props);\r\n\r\n    if (Array.isArray(commands)) {\r\n      commands.forEach(command => {\r\n        if (typeof command.exec === \"string\") {\r\n          (this.editor.commands as any).bindKey(command.bindKey, command.exec);\r\n        } else {\r\n          (this.editor.commands as any).addCommand(command);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (keyboardHandler) {\r\n      this.editor.setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\r\n    }\r\n\r\n    if (className) {\r\n      this.refEditor.className += \" \" + className;\r\n    }\r\n\r\n    if (onLoad) {\r\n      onLoad(this.editor);\r\n    }\r\n\r\n    this.editor.resize();\r\n\r\n    if (focus) {\r\n      this.editor.focus();\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IAceEditorProps) {\r\n    const oldProps = prevProps;\r\n    const nextProps = this.props;\r\n\r\n    for (let i = 0; i < editorOptions.length; i++) {\r\n      const option = editorOptions[i];\r\n      if (nextProps[option] !== oldProps[option]) {\r\n        // @ts-ignore\r\n        this.editor.setOption(option, nextProps[option]);\r\n      }\r\n    }\r\n\r\n    if (nextProps.className !== oldProps.className) {\r\n      const appliedClasses = this.refEditor.className;\r\n      const appliedClassesArray = appliedClasses.trim().split(\" \");\r\n      const oldClassesArray = oldProps.className.trim().split(\" \");\r\n      oldClassesArray.forEach(oldClass => {\r\n        const index = appliedClassesArray.indexOf(oldClass);\r\n        appliedClassesArray.splice(index, 1);\r\n      });\r\n      this.refEditor.className =\r\n        \" \" + nextProps.className + \" \" + appliedClassesArray.join(\" \");\r\n    }\r\n\r\n    // First process editor value, as it may create a new session (see issue #300)\r\n    if (\r\n      this.editor &&\r\n      nextProps.value != null &&\r\n      this.editor.getValue() !== nextProps.value\r\n    ) {\r\n      // editor.setValue is a synchronous function call, change event is emitted before setValue return.\r\n      this.silent = true;\r\n      const pos = this.editor.session.selection.toJSON();\r\n      this.editor.setValue(nextProps.value, nextProps.cursorStart);\r\n      this.editor.session.selection.fromJSON(pos);\r\n      this.silent = false;\r\n    }\r\n\r\n    if (nextProps.placeholder !== oldProps.placeholder) {\r\n      this.updatePlaceholder();\r\n    }\r\n    if (nextProps.mode !== oldProps.mode) {\r\n      this.editor\r\n        .getSession()\r\n        .setMode(\r\n          typeof nextProps.mode === \"string\"\r\n            ? `ace/mode/${nextProps.mode}`\r\n            : (nextProps.mode as Ace.SyntaxMode)\r\n        );\r\n    }\r\n    if (nextProps.theme !== oldProps.theme) {\r\n      this.editor.setTheme(\"ace/theme/\" + nextProps.theme);\r\n    }\r\n    if (nextProps.keyboardHandler !== oldProps.keyboardHandler) {\r\n      if (nextProps.keyboardHandler) {\r\n        this.editor.setKeyboardHandler(\r\n          \"ace/keyboard/\" + nextProps.keyboardHandler\r\n        );\r\n      } else {\r\n        this.editor.setKeyboardHandler(null);\r\n      }\r\n    }\r\n    if (nextProps.fontSize !== oldProps.fontSize) {\r\n      this.editor.setFontSize(\r\n        typeof nextProps.fontSize === \"number\"\r\n          ? `${nextProps.fontSize}px`\r\n          : nextProps.fontSize\r\n      );\r\n    }\r\n    if (nextProps.wrapEnabled !== oldProps.wrapEnabled) {\r\n      this.editor.getSession().setUseWrapMode(nextProps.wrapEnabled);\r\n    }\r\n    if (nextProps.showPrintMargin !== oldProps.showPrintMargin) {\r\n      this.editor.setShowPrintMargin(nextProps.showPrintMargin);\r\n    }\r\n    if (nextProps.showGutter !== oldProps.showGutter) {\r\n      this.editor.renderer.setShowGutter(nextProps.showGutter);\r\n    }\r\n    if (!isEqual(nextProps.setOptions, oldProps.setOptions)) {\r\n      this.handleOptions(nextProps);\r\n    }\r\n    if (!isEqual(nextProps.annotations, oldProps.annotations)) {\r\n      this.editor.getSession().setAnnotations(nextProps.annotations || []);\r\n    }\r\n    if (\r\n      !isEqual(nextProps.markers, oldProps.markers) &&\r\n      Array.isArray(nextProps.markers)\r\n    ) {\r\n      this.handleMarkers(nextProps.markers);\r\n    }\r\n\r\n    // this doesn't look like it works at all....\r\n    if (!isEqual(nextProps.scrollMargin, oldProps.scrollMargin)) {\r\n      this.handleScrollMargins(nextProps.scrollMargin);\r\n    }\r\n\r\n    if (\r\n      prevProps.height !== this.props.height ||\r\n      prevProps.width !== this.props.width\r\n    ) {\r\n      this.editor.resize();\r\n    }\r\n    if (this.props.focus && !prevProps.focus) {\r\n      this.editor.focus();\r\n    }\r\n  }\r\n\r\n  public handleScrollMargins(margins = [0, 0, 0, 0]) {\r\n    this.editor.renderer.setScrollMargin(\r\n      margins[0],\r\n      margins[1],\r\n      margins[2],\r\n      margins[3]\r\n    );\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.editor.destroy();\r\n    this.editor = null;\r\n  }\r\n\r\n  public onChange(event: any) {\r\n    if (this.props.onChange && !this.silent) {\r\n      const value = this.editor.getValue();\r\n      this.props.onChange(value, event);\r\n    }\r\n  }\r\n\r\n  public onSelectionChange(event: any) {\r\n    if (this.props.onSelectionChange) {\r\n      const value = this.editor.getSelection();\r\n      this.props.onSelectionChange(value, event);\r\n    }\r\n  }\r\n  public onCursorChange(event: any) {\r\n    if (this.props.onCursorChange) {\r\n      const value = this.editor.getSelection();\r\n      this.props.onCursorChange(value, event);\r\n    }\r\n  }\r\n  public onInput(event?: any) {\r\n    if (this.props.onInput) {\r\n      this.props.onInput(event);\r\n    }\r\n    if (this.props.placeholder) {\r\n      this.updatePlaceholder();\r\n    }\r\n  }\r\n  public onFocus(event: any) {\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(event, this.editor);\r\n    }\r\n  }\r\n\r\n  public onBlur(event: any) {\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(event, this.editor);\r\n    }\r\n  }\r\n\r\n  public onCopy({ text }: { text: string }) {\r\n    if (this.props.onCopy) {\r\n      this.props.onCopy(text);\r\n    }\r\n  }\r\n\r\n  public onPaste({ text }: { text: string }) {\r\n    if (this.props.onPaste) {\r\n      this.props.onPaste(text);\r\n    }\r\n  }\r\n\r\n  public onScroll() {\r\n    if (this.props.onScroll) {\r\n      this.props.onScroll(this.editor);\r\n    }\r\n  }\r\n\r\n  public handleOptions(props: IAceEditorProps) {\r\n    const setOptions = Object.keys(props.setOptions);\r\n    for (let y = 0; y < setOptions.length; y++) {\r\n      // @ts-ignore\r\n      this.editor.setOption(setOptions[y], props.setOptions[setOptions[y]]);\r\n    }\r\n  }\r\n\r\n  public handleMarkers(markers: IMarker[]) {\r\n    // remove foreground markers\r\n    let currentMarkers = this.editor.getSession().getMarkers(true);\r\n    for (const i in currentMarkers) {\r\n      if (currentMarkers.hasOwnProperty(i)) {\r\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\r\n      }\r\n    }\r\n    // remove background markers except active line marker and selected word marker\r\n    currentMarkers = this.editor.getSession().getMarkers(false);\r\n    for (const i in currentMarkers) {\r\n      if (\r\n        currentMarkers.hasOwnProperty(i) &&\r\n        currentMarkers[i].clazz !== \"ace_active-line\" &&\r\n        currentMarkers[i].clazz !== \"ace_selected-word\"\r\n      ) {\r\n        this.editor.getSession().removeMarker(currentMarkers[i].id);\r\n      }\r\n    }\r\n    // add new markers\r\n    markers.forEach(\r\n      ({\r\n        startRow,\r\n        startCol,\r\n        endRow,\r\n        endCol,\r\n        className,\r\n        type,\r\n        inFront = false\r\n      }) => {\r\n        const range = new Range(startRow, startCol, endRow, endCol);\r\n        this.editor.getSession().addMarker(range, className, type, inFront);\r\n      }\r\n    );\r\n  }\r\n\r\n  public updatePlaceholder() {\r\n    // Adapted from https://stackoverflow.com/questions/26695708/how-can-i-add-placeholder-text-when-the-editor-is-empty\r\n\r\n    const editor = this.editor;\r\n    const { placeholder } = this.props;\r\n\r\n    const showPlaceholder = !editor.session.getValue().length;\r\n    let node = editor.renderer.placeholderNode;\r\n\r\n    if (!showPlaceholder && node) {\r\n      editor.renderer.scroller.removeChild(editor.renderer.placeholderNode);\r\n      editor.renderer.placeholderNode = null;\r\n    } else if (showPlaceholder && !node) {\r\n      node = editor.renderer.placeholderNode = document.createElement(\"div\");\r\n      node.textContent = placeholder || \"\";\r\n      node.className = \"ace_comment ace_placeholder\";\r\n      node.style.padding = \"0 9px\";\r\n      node.style.position = \"absolute\";\r\n      node.style.zIndex = \"3\";\r\n      editor.renderer.scroller.appendChild(node);\r\n    } else if (showPlaceholder && node) {\r\n      node.textContent = placeholder;\r\n    }\r\n  }\r\n\r\n  public updateRef(item: HTMLElement) {\r\n    this.refEditor = item;\r\n  }\r\n\r\n  public render() {\r\n    const { name, width, height, style } = this.props;\r\n    const divStyle = { width, height, ...style };\r\n    return <div ref={this.updateRef} id={name} style={divStyle} />;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script"}